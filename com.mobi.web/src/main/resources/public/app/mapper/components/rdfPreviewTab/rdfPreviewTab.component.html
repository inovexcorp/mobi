<!--
  #%L
  com.mobi.web
  $Id:$
  $HeadURL:$
  %%
  Copyright (C) 2016 - 2024 iNovex Information Systems, Inc.
  %%
  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU Affero General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.
  
  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.
  
  You should have received a copy of the GNU Affero General Public License
  along with this program.  If not, see <http://www.gnu.org/licenses/>.
  #L%
  -->
<div class="rdf-preview-tab container-fluid h-100">
    <div class="row h-100">
        <div class="col-5 h-100 d-flex flex-column">
            <h3 class="mapping-title text-truncate">{{state.selected.record ? state.selected.record.title : state.selected.config.title}}</h3>
            <div class="flex-1 remove-min-height d-flex flex-column" [formGroup]="previewForm">
                <error-display *ngIf="errorMessage">{{errorMessage}}</error-display>
                <div class="serialization-container mb-1 d-flex">
                    <mapper-serialization-select class="flex-1" [label]="'Serialization'" [parentForm]="previewForm" required="true"></mapper-serialization-select>
                    <button mat-button color="primary" class="ml-2" (click)="generatePreview()">Refresh</button>
                </div>
                <div class="codemirror-wrapper flex-1 remove-min-height">
                    <ngx-codemirror formControlName="preview" [options]="editorOptions"></ngx-codemirror>
                </div>
            </div>
        </div>
        <div class="col-7 h-100">
            <preview-data-grid [rows]="dm.dataRows" [highlightIndexes]="state.highlightIndexes" [containsHeaders]="dm.containsHeaders"></preview-data-grid>
        </div>
    </div>
</div>
